{"version":3,"file":"static/webpack/static/development/pages/product.js.d0c24967c29e848fbfbf.hot-update.js","sources":["webpack:///./pages/product.tsx"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nclass Product extends React.Component {\n  state = {\n    product: {},\n  }\n  componentDidMount(){\n    const self: any = this;\n    const verif = JSON.parse(localStorage.getItem('myKey:546726736522537625467'));\n    if (verif.length > 0) {\n      console.log(\"storage Call\");\n      self.props.dispatch({\n        type: 'SET',\n        data: verif,\n      });\n    } else {\n      console.log(\"api Call\");\n      axios.get(`http://0.0.0.0:8080/products`).then(({headers, data}) => {\n        const pages_ = parseInt(headers['x-total-count']) / 20;\n        self.setState({pages:pages_});\n        localStorage.setItem('myKey:546726736522537625467', JSON.stringify(data))\n        self.props.dispatch({\n          type: 'SET',\n          data,\n        });\n      })\n    }\n    \n  }\n  componentDidUpdate(prev){\n    const { data }:any = this.props;\n    if (prev.data != data){\n      const urlParams = new URLSearchParams(window.location.search);\n      const myParam = urlParams.get('id');\n      console.log(myParam)\n      this.filterData(myParam);\n    }\n  }\n  filterData = (myParam) => {\n    const {data:d}: any = this.props;\n    const myData = d.filter(el => el.objectID == myParam);\n    console.log(myData)\n    if (myData.length > 0)\n      this.setState({ product: myData[0] })\n  }\n  render (){\n    const { product }: any = this.state;\n    const { title, image, price, compare_at_price, vendor, weight, sku, inventory_quantity, body_html_safe }: any = product;\n    console.log(product);\n    return (\n      <div style={{ padding: '30px' }}>\n        <div><Link href=\"/\">Retour</Link></div>\n        <div><img style={{width:'300px'}} src={image}/></div>\n        <div>{title}</div>\n        <div>{price}€</div>\n        <div>Le prix baré : {compare_at_price}€</div>\n        <div>Quantité : {inventory_quantity}</div>\n        <div>La description: {body_html_safe?body_html_safe:\"-\"}</div>\n        <div>Le fabriquant : {vendor}</div>\n        <div>Le poids: {weight}</div>\n        <div>Le SKU: {sku}</div>\n        <div>\n          {inventory_quantity > 0 ? <button>Ajouter au panier</button> : <button>Me notifier quand le produit est de retour</button>}\n          {/* Un bouton \"Ajouter au panier\" si l'article est en stock ou un bouton \"Me notifier quand le produit est de retour\" sinon (les boutons ne seront reliés à rien)</div> */}\n        </div>\n      </div>\n    );\n  };\n\n}\n\nexport default connect(s => s)(Product);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AADA;AACA;AAkCA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;AAvCA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAEA;;;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAjEA;AACA;AAoEA;AAAA;AAAA;;;;A","sourceRoot":""}