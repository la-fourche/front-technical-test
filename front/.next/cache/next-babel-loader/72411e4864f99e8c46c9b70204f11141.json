{"ast":null,"code":"var _jsxFileName = \"/Users/mehditagaizine/Dev/front-technical-test/front/pages/product.tsx\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport Link from 'next/link';\n\nclass Product extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      product: {}\n    });\n\n    _defineProperty(this, \"filterData\", myParam => {\n      const {\n        data: d\n      } = this.props;\n      const myData = d.filter(el => el.objectID == myParam);\n      console.log(myData);\n      if (myData.length > 0) this.setState({\n        product: myData[0]\n      });\n    });\n  }\n\n  componentDidMount() {\n    const self = this;\n    const verif = JSON.parse(localStorage.getItem('myKey:546726736522537625467'));\n    const {\n      data: d\n    } = this.props;\n\n    if (d.length === 0) {\n      if (verif.length > 0) {\n        console.log(\"storage Call\");\n        self.props.dispatch({\n          type: 'SET',\n          data: verif\n        });\n      } else {\n        console.log(\"api Call\");\n        axios.get(`http://0.0.0.0:8080/products`).then(({\n          headers,\n          data\n        }) => {\n          const pages_ = parseInt(headers['x-total-count']) / 20;\n          self.setState({\n            pages: pages_\n          });\n          localStorage.setItem('myKey:546726736522537625467', JSON.stringify(data));\n          self.props.dispatch({\n            type: 'SET',\n            data\n          });\n        });\n      }\n    }\n  }\n\n  componentDidUpdate(prev) {\n    const {\n      data\n    } = this.props;\n\n    if (prev.data != data) {\n      const urlParams = new URLSearchParams(window.location.search);\n      const myParam = urlParams.get('id');\n      console.log(myParam);\n      this.filterData(myParam);\n    }\n  }\n\n  render() {\n    const {\n      product\n    } = this.state;\n    const {\n      data\n    } = this.props;\n    const {\n      title,\n      image,\n      price,\n      compare_at_price,\n      vendor,\n      weight,\n      sku,\n      inventory_quantity,\n      body_html_safe\n    } = product;\n    console.log(product, data);\n    return __jsx(\"div\", {\n      style: {\n        padding: '30px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, __jsx(Link, {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Retour\")), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, __jsx(\"img\", {\n      style: {\n        width: '300px'\n      },\n      src: image,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, title), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, price, \"\\u20AC\"), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Le prix bar\\xE9 : \", compare_at_price, \"\\u20AC\"), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Quantit\\xE9 : \", inventory_quantity), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"La description: \", body_html_safe ? body_html_safe : \"-\"), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Le fabriquant : \", vendor), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Le poids: \", weight), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Le SKU: \", sku), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, inventory_quantity > 0 ? __jsx(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Ajouter au panier\") : __jsx(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Me notifier quand le produit est de retour\")));\n  }\n\n}\n\nexport default connect(s => s)(Product);","map":{"version":3,"sources":["/Users/mehditagaizine/Dev/front-technical-test/front/pages/product.tsx"],"names":["React","connect","axios","Link","Product","Component","product","myParam","data","d","props","myData","filter","el","objectID","console","log","length","setState","componentDidMount","self","verif","JSON","parse","localStorage","getItem","dispatch","type","get","then","headers","pages_","parseInt","pages","setItem","stringify","componentDidUpdate","prev","urlParams","URLSearchParams","window","location","search","filterData","render","state","title","image","price","compare_at_price","vendor","weight","sku","inventory_quantity","body_html_safe","padding","width","s"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport Link from 'next/link';\n\nclass Product extends React.Component {\n  state = {\n    product: {},\n  }\n  componentDidMount(){\n    const self: any = this;\n    const verif = JSON.parse(localStorage.getItem('myKey:546726736522537625467'));\n    const { data:d }: any = this.props;\n    if (d.length === 0) {\n      if (verif.length > 0) {\n        console.log(\"storage Call\");\n        self.props.dispatch({\n          type: 'SET',\n          data: verif,\n        });\n      } else {\n        console.log(\"api Call\");\n        axios.get(`http://0.0.0.0:8080/products`).then(({headers, data}) => {\n          const pages_ = parseInt(headers['x-total-count']) / 20;\n          self.setState({pages:pages_});\n          localStorage.setItem('myKey:546726736522537625467', JSON.stringify(data))\n          self.props.dispatch({\n            type: 'SET',\n            data,\n          });\n        })\n      }\n    }\n    \n  }\n  componentDidUpdate(prev){\n    const { data }:any = this.props;\n    if (prev.data != data){\n      const urlParams = new URLSearchParams(window.location.search);\n      const myParam = urlParams.get('id');\n      console.log(myParam)\n      this.filterData(myParam);\n    }\n  }\n  filterData = (myParam) => {\n    const {data:d}: any = this.props;\n    const myData = d.filter(el => el.objectID == myParam);\n    console.log(myData)\n    if (myData.length > 0)\n      this.setState({ product: myData[0] })\n  }\n  render (){\n    const { product }: any = this.state;\n    const { data }: any = this.props;\n    const { title, image, price, compare_at_price, vendor, weight, sku, inventory_quantity, body_html_safe }: any = product;\n    console.log(product, data);\n    return (\n      <div style={{ padding: '30px' }}>\n        <div><Link href=\"/\">Retour</Link></div>\n        <div><img style={{width:'300px'}} src={image}/></div>\n        <div>{title}</div>\n        <div>{price}€</div>\n        <div>Le prix baré : {compare_at_price}€</div>\n        <div>Quantité : {inventory_quantity}</div>\n        <div>La description: {body_html_safe?body_html_safe:\"-\"}</div>\n        <div>Le fabriquant : {vendor}</div>\n        <div>Le poids: {weight}</div>\n        <div>Le SKU: {sku}</div>\n        <div>\n          {inventory_quantity > 0 ? <button>Ajouter au panier</button> : <button>Me notifier quand le produit est de retour</button>}\n          {/* Un bouton \"Ajouter au panier\" si l'article est en stock ou un bouton \"Me notifier quand le produit est de retour\" sinon (les boutons ne seront reliés à rien)</div> */}\n        </div>\n      </div>\n    );\n  };\n\n}\n\nexport default connect(s => s)(Product);"]},"metadata":{},"sourceType":"module"}