{"ast":null,"code":"import _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/mehditagaizine/Dev/front-technical-test/front/pages/index.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport axios from 'axios';\nimport Product from '../components/product';\nimport { connect } from 'react-redux';\n\nvar Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      page: 1,\n      pages: 0\n    });\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var self = this;\n      var verif = JSON.parse(localStorage.getItem('myKey:546726736522537625467'));\n      var d = this.props.data;\n\n      if (d.length === 0) {\n        if (verif.length > 0) {\n          self.props.dispatch({\n            type: 'SET',\n            data: verif\n          });\n        }\n\n        axios.get(\"http://0.0.0.0:8080/products/?_page=&_limit=20\").then(function (_ref) {\n          var headers = _ref.headers,\n              data = _ref.data;\n          var pages_ = _parseInt(headers['x-total-count']) / 20;\n          self.setState({\n            pages: pages_\n          });\n          localStorage.setItem('myKey:546726736522537625467', _JSON$stringify(data));\n          self.props.dispatch({\n            type: 'SET',\n            data: data\n          });\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var data = this.props.data;\n\n      if (prevProps.data !== data) {\n        localStorage.setItem('myKey:546726736522537625467', _JSON$stringify(data));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var props = this.props;\n      var products = props.data,\n          dispatch = props.dispatch;\n      var _this$state = this.state,\n          page = _this$state.page,\n          pages = _this$state.pages;\n\n      var getData = function getData(n) {\n        var _ref2, headers, data, pages_;\n\n        return _regeneratorRuntime.async(function getData$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(axios.get(\"http://0.0.0.0:8080/products/?_page=\".concat(n, \"&_limit=20\")));\n\n              case 2:\n                _ref2 = _context.sent;\n                headers = _ref2.headers;\n                data = _ref2.data;\n                pages_ = _parseInt(headers['x-total-count']) / 20;\n\n                _this2.setState({\n                  pages: pages_\n                });\n\n                dispatch({\n                  type: 'SET',\n                  data: data\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      };\n\n      var getPage = function getPage(e) {\n        var n = e.target.id;\n\n        _this2.setState({\n          page: n\n        });\n\n        getData(n);\n      };\n\n      var Pagination = function Pagination() {\n        var pages_ = [];\n\n        for (var i = 1; i < pages + 1; i++) {\n          pages_.push(__jsx(\"a\", {\n            key: i + _Date$now(),\n            href: \"#\",\n            style: {\n              marginRight: '15px'\n            },\n            id: i.toString(),\n            onClick: getPage,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61\n            },\n            __self: this\n          }, i));\n        }\n\n        return __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, pages_);\n      };\n\n      var PageProducts = function PageProducts() {\n        return products.map(function (product, index) {\n          return __jsx(Product, {\n            key: index,\n            product: product,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          });\n        });\n      };\n\n      return __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, __jsx(PageProducts, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), __jsx(Pagination, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport default connect(function (s) {\n  return s;\n})(Home);","map":{"version":3,"sources":["/Users/mehditagaizine/Dev/front-technical-test/front/pages/index.tsx"],"names":["React","axios","Product","connect","Home","page","pages","self","verif","JSON","parse","localStorage","getItem","d","props","data","length","dispatch","type","get","then","headers","pages_","setState","setItem","prevProps","products","state","getData","n","getPage","e","target","id","Pagination","i","push","marginRight","toString","PageProducts","map","product","index","Component","s"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport Product from '../components/product';\nimport { connect } from 'react-redux';\n\nclass Home extends React.Component {\n  state = {\n    page: 1,\n    pages: 0,\n  }\n  componentDidMount(){\n    const self: any = this;\n    const verif = JSON.parse(localStorage.getItem('myKey:546726736522537625467'));\n    const { data:d }: any = this.props;\n    if (d.length === 0) {\n      if (verif.length > 0) {\n        self.props.dispatch({\n          type: 'SET',\n          data: verif,\n        });\n      }\n      axios.get(`http://0.0.0.0:8080/products/?_page=&_limit=20`).then(({headers, data}) => {\n        const pages_ = parseInt(headers['x-total-count']) / 20;\n        self.setState({pages:pages_});\n        localStorage.setItem('myKey:546726736522537625467', JSON.stringify(data))\n        self.props.dispatch({\n          type: 'SET',\n          data,\n        });\n      })\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const { data }: any = this.props;\n    if (prevProps.data !== data) {\n      localStorage.setItem('myKey:546726736522537625467', JSON.stringify(data))  \n    }\n  }\n  render() {\n  const props: any = this.props;\n  const { data:products, dispatch } = props;\n  const { page, pages } = this.state;\n  const getData = async (n: number) => {\n    const {headers, data} = await axios.get(`http://0.0.0.0:8080/products/?_page=${n}&_limit=20`);\n    const pages_ = parseInt(headers['x-total-count']) / 20;\n    this.setState({pages:pages_});\n    dispatch({\n      type: 'SET',\n      data,\n    });\n  }\n  const getPage = (e:any) => {\n    const n = e.target.id;\n    this.setState({page:n});\n    getData(n);\n  }\n  const Pagination = () => {\n    let pages_ = [];\n    for(var i = 1; i < pages + 1; i++){\n      pages_.push(\n        <a key={i+Date.now()} href=\"#\" style={{ marginRight: '15px' }} id={i.toString()} onClick={getPage}>{i}</a>\n      )\n    }\n    return (<div>\n      {pages_}\n    </div>);\n  }\n  const PageProducts = () => products.map((product: any, index: number) => <Product key={index} product={product}/>);\n  return (\n    <div>\n      <PageProducts />\n      <Pagination />\n    </div>\n  );\n};\n}\nexport default connect(s => s)(Home);"]},"metadata":{},"sourceType":"module"}