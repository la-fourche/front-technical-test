{"ast":null,"code":"import _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mehditagaizine/Dev/front-technical-test/front/pages/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport Product from '../components/product';\nimport { connect } from 'react-redux';\n\nvar Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home() {\n    _classCallCheck(this, Home);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Home).apply(this, arguments));\n  }\n\n  _createClass(Home, [{\n    key: \"render\",\n    value: function render() {\n      var props = this.props;\n\n      var _useState = useState(0),\n          pages = _useState[0],\n          setPages = _useState[1];\n\n      var products = props.data,\n          dispatch = props.dispatch;\n\n      var _useState2 = useState(1),\n          page = _useState2[0],\n          setPage = _useState2[1];\n\n      var getData = function getData(n) {\n        var _ref, headers, data, pages_;\n\n        return _regeneratorRuntime.async(function getData$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(axios.get(\"http://0.0.0.0:8080/products/?_page=\".concat(n, \"&_limit=20\")));\n\n              case 2:\n                _ref = _context.sent;\n                headers = _ref.headers;\n                data = _ref.data;\n                _context.next = 7;\n                return _regeneratorRuntime.awrap(_parseInt(headers['x-total-count']));\n\n              case 7:\n                _context.t0 = _context.sent;\n                pages_ = _context.t0 / 20;\n                setPages(pages_);\n                dispatch({\n                  type: 'SET',\n                  data: data\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      };\n\n      var getPage = function getPage(e) {\n        var n = e.target.id;\n        setPage(n);\n        getData(n);\n      };\n\n      var Pagination = function Pagination() {\n        var pages_ = [];\n\n        for (var i = 1; i < pages + 1; i++) {\n          pages_.push(__jsx(\"a\", {\n            key: i + _Date$now(),\n            href: \"#\",\n            style: {\n              marginRight: '15px'\n            },\n            id: i.toString(),\n            onClick: getPage,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 30\n            },\n            __self: this\n          }, i));\n        }\n\n        return __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33\n          },\n          __self: this\n        }, pages_);\n      };\n\n      if (products.length === 0) {\n        getData(page);\n      }\n\n      return __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, products.map(function (product) {\n        return __jsx(Product, {\n          product: product,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        });\n      }), __jsx(Pagination, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport default connect(function (s) {\n  return s;\n})(Home);","map":{"version":3,"sources":["/Users/mehditagaizine/Dev/front-technical-test/front/pages/index.tsx"],"names":["React","useState","axios","Product","connect","Home","props","pages","setPages","products","data","dispatch","page","setPage","getData","n","get","headers","pages_","type","getPage","e","target","id","Pagination","i","push","marginRight","toString","length","map","product","Component","s"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,OAAT,QAAwB,aAAxB;;IAEMC,I;;;;;;;;;;;;;6BACE;AACN,UAAMC,KAAK,GAAG,KAAKA,KAAnB;;AADM,sBAEsBL,QAAQ,CAAC,CAAD,CAF9B;AAAA,UAEEM,KAFF;AAAA,UAESC,QAFT;;AAAA,UAGOC,QAHP,GAG8BH,KAH9B,CAGEI,IAHF;AAAA,UAGiBC,QAHjB,GAG8BL,KAH9B,CAGiBK,QAHjB;;AAAA,uBAIoBV,QAAQ,CAAC,CAAD,CAJ5B;AAAA,UAIEW,IAJF;AAAA,UAIQC,OAJR;;AAKN,UAAMC,OAAO,GAAG,SAAVA,OAAU,CAAOC,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDACgBb,KAAK,CAACc,GAAN,+CAAiDD,CAAjD,gBADhB;;AAAA;AAAA;AACPE,gBAAAA,OADO,QACPA,OADO;AACEP,gBAAAA,IADF,QACEA,IADF;AAAA;AAAA,iDAEO,UAASO,OAAO,CAAC,eAAD,CAAhB,CAFP;;AAAA;AAAA;AAERC,gBAAAA,MAFQ,iBAE4C,EAF5C;AAGdV,gBAAAA,QAAQ,CAACU,MAAD,CAAR;AACAP,gBAAAA,QAAQ,CAAC;AACPQ,kBAAAA,IAAI,EAAE,KADC;AAEPT,kBAAAA,IAAI,EAAJA;AAFO,iBAAD,CAAR;;AAJc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAhB;;AASA,UAAMU,OAAO,GAAG,SAAVA,OAAU,CAACC,CAAD,EAAW;AACzB,YAAMN,CAAC,GAAGM,CAAC,CAACC,MAAF,CAASC,EAAnB;AACAV,QAAAA,OAAO,CAACE,CAAD,CAAP;AACAD,QAAAA,OAAO,CAACC,CAAD,CAAP;AACD,OAJD;;AAKA,UAAMS,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,YAAIN,MAAM,GAAG,EAAb;;AACA,aAAI,IAAIO,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGlB,KAAK,GAAG,CAA3B,EAA8BkB,CAAC,EAA/B,EAAkC;AAChCP,UAAAA,MAAM,CAACQ,IAAP,CACE;AAAG,YAAA,GAAG,EAAED,CAAC,GAAC,WAAV;AAAsB,YAAA,IAAI,EAAC,GAA3B;AAA+B,YAAA,KAAK,EAAE;AAAEE,cAAAA,WAAW,EAAE;AAAf,aAAtC;AAA+D,YAAA,EAAE,EAAEF,CAAC,CAACG,QAAF,EAAnE;AAAiF,YAAA,OAAO,EAAER,OAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAoGK,CAApG,CADF;AAGD;;AACD,eAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACLP,MADK,CAAR;AAGD,OAVD;;AAWA,UAAIT,QAAQ,CAACoB,MAAT,KAAoB,CAAxB,EAA2B;AACzBf,QAAAA,OAAO,CAACF,IAAD,CAAP;AACD;;AACD,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEIH,QAAQ,CAACqB,GAAT,CAAa,UAACC,OAAD;AAAA,eAAkB,MAAC,OAAD;AAAS,UAAA,OAAO,EAAEA,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAlB;AAAA,OAAb,CAFJ,EAIE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADF;AAQD;;;;EA1CkB/B,KAAK,CAACgC,S;;AA4CzB,eAAe5B,OAAO,CAAC,UAAA6B,CAAC;AAAA,SAAIA,CAAJ;AAAA,CAAF,CAAP,CAAgB5B,IAAhB,CAAf","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport Product from '../components/product';\nimport { connect } from 'react-redux';\n\nclass Home extends React.Component {\nrender(){\n  const props = this.props;\n  const [ pages, setPages ] = useState(0);\n  const { data:products, dispatch } = props;\n  const [ page, setPage ] = useState(1);\n  const getData = async (n: number) => {\n    const {headers, data} = await axios.get(`http://0.0.0.0:8080/products/?_page=${n}&_limit=20`);\n    const pages_ = await parseInt(headers['x-total-count']) / 20;\n    setPages(pages_);\n    dispatch({\n      type: 'SET',\n      data,\n    });\n  }\n  const getPage = (e:any) => {\n    const n = e.target.id;\n    setPage(n);\n    getData(n);\n  }\n  const Pagination = () => {\n    let pages_ = [];\n    for(var i = 1; i < pages + 1; i++){\n      pages_.push(\n        <a key={i+Date.now()} href=\"#\" style={{ marginRight: '15px' }} id={i.toString()} onClick={getPage}>{i}</a>\n      )\n    }\n    return (<div>\n      {pages_}\n    </div>);\n  }\n  if (products.length === 0) {\n    getData(page);\n  }\n  return (\n    <div>\n      {\n        products.map((product: any) => <Product product={product}/>)\n      }\n      <Pagination />\n    </div>\n  );\n};\n}\nexport default connect(s => s)(Home);"]},"metadata":{},"sourceType":"module"}