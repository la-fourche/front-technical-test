{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/mehditagaizine/Dev/front-technical-test/front/pages/product.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nvar Product =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Product, _React$Component);\n\n  function Product() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Product);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Product)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      product: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"filterData\", function (myParam) {\n      var d = _this.props.data;\n      var myData = d.filter(function (el) {\n        return el.objectID == myParam;\n      });\n      console.log(myData);\n      if (myData.length > 0) _this.setState({\n        product: myData[0]\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Product, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var self = this;\n      var verif = JSON.parse(localStorage.getItem('myKey:546726736522537625467'));\n\n      if (verif.length > 0) {\n        console.log(\"storage Call\");\n        self.props.dispatch({\n          type: 'SET',\n          data: verif\n        });\n      } else {\n        console.log(\"api Call\");\n        axios.get(\"http://0.0.0.0:8080/products\").then(function (_ref) {\n          var headers = _ref.headers,\n              data = _ref.data;\n          var pages_ = _parseInt(headers['x-total-count']) / 20;\n          self.setState({\n            pages: pages_\n          });\n          localStorage.setItem('myKey:546726736522537625467', _JSON$stringify(data));\n          self.props.dispatch({\n            type: 'SET',\n            data: data\n          });\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prev) {\n      var data = this.props.data;\n\n      if (prev.data != data) {\n        var urlParams = new URLSearchParams(window.location.search);\n        var myParam = urlParams.get('id');\n        console.log(myParam);\n        this.filterData(myParam);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var product = this.state.product;\n      console.log(product);\n      return __jsx(\"div\", {\n        style: {\n          padding: '30px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"hi\");\n    }\n  }]);\n\n  return Product;\n}(React.Component);\n\nexport default connect(function (s) {\n  return s;\n})(Product);","map":{"version":3,"sources":["/Users/mehditagaizine/Dev/front-technical-test/front/pages/product.tsx"],"names":["React","connect","axios","Product","product","myParam","d","props","data","myData","filter","el","objectID","console","log","length","setState","self","verif","JSON","parse","localStorage","getItem","dispatch","type","get","then","headers","pages_","pages","setItem","prev","urlParams","URLSearchParams","window","location","search","filterData","state","padding","Component","s"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAEMC,O;;;;;;;;;;;;;;;;;;4DACI;AACNC,MAAAA,OAAO,EAAE;AADH,K;;iEAmCK,UAACC,OAAD,EAAa;AAAA,UACZC,CADY,GACF,MAAKC,KADH,CACjBC,IADiB;AAExB,UAAMC,MAAM,GAAGH,CAAC,CAACI,MAAF,CAAS,UAAAC,EAAE;AAAA,eAAIA,EAAE,CAACC,QAAH,IAAeP,OAAnB;AAAA,OAAX,CAAf;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAYL,MAAZ;AACA,UAAIA,MAAM,CAACM,MAAP,GAAgB,CAApB,EACE,MAAKC,QAAL,CAAc;AAAEZ,QAAAA,OAAO,EAAEK,MAAM,CAAC,CAAD;AAAjB,OAAd;AACH,K;;;;;;;wCAtCkB;AACjB,UAAMQ,IAAS,GAAG,IAAlB;AACA,UAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,6BAArB,CAAX,CAAd;;AACA,UAAIJ,KAAK,CAACH,MAAN,GAAe,CAAnB,EAAsB;AACpBF,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAG,QAAAA,IAAI,CAACV,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,UAAAA,IAAI,EAAE,KADY;AAElBhB,UAAAA,IAAI,EAAEU;AAFY,SAApB;AAID,OAND,MAMO;AACLL,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAZ,QAAAA,KAAK,CAACuB,GAAN,iCAA0CC,IAA1C,CAA+C,gBAAqB;AAAA,cAAnBC,OAAmB,QAAnBA,OAAmB;AAAA,cAAVnB,IAAU,QAAVA,IAAU;AAClE,cAAMoB,MAAM,GAAG,UAASD,OAAO,CAAC,eAAD,CAAhB,IAAqC,EAApD;AACAV,UAAAA,IAAI,CAACD,QAAL,CAAc;AAACa,YAAAA,KAAK,EAACD;AAAP,WAAd;AACAP,UAAAA,YAAY,CAACS,OAAb,CAAqB,6BAArB,EAAoD,gBAAetB,IAAf,CAApD;AACAS,UAAAA,IAAI,CAACV,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,YAAAA,IAAI,EAAE,KADY;AAElBhB,YAAAA,IAAI,EAAJA;AAFkB,WAApB;AAID,SARD;AASD;AAEF;;;uCACkBuB,I,EAAK;AAAA,UACdvB,IADc,GACD,KAAKD,KADJ,CACdC,IADc;;AAEtB,UAAIuB,IAAI,CAACvB,IAAL,IAAaA,IAAjB,EAAsB;AACpB,YAAMwB,SAAS,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAAlB;AACA,YAAM/B,OAAO,GAAG2B,SAAS,CAACP,GAAV,CAAc,IAAd,CAAhB;AACAZ,QAAAA,OAAO,CAACC,GAAR,CAAYT,OAAZ;AACA,aAAKgC,UAAL,CAAgBhC,OAAhB;AACD;AACF;;;6BAQQ;AAAA,UACCD,OADD,GACa,KAAKkC,KADlB,CACClC,OADD;AAEPS,MAAAA,OAAO,CAACC,GAAR,CAAYV,OAAZ;AACA,aACE;AAAK,QAAA,KAAK,EAAE;AAAEmC,UAAAA,OAAO,EAAE;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAKD;;;;EAnDmBvC,KAAK,CAACwC,S;;AAuD5B,eAAevC,OAAO,CAAC,UAAAwC,CAAC;AAAA,SAAIA,CAAJ;AAAA,CAAF,CAAP,CAAgBtC,OAAhB,CAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nclass Product extends React.Component {\n  state = {\n    product: {},\n  }\n  componentDidMount(){\n    const self: any = this;\n    const verif = JSON.parse(localStorage.getItem('myKey:546726736522537625467'));\n    if (verif.length > 0) {\n      console.log(\"storage Call\");\n      self.props.dispatch({\n        type: 'SET',\n        data: verif,\n      });\n    } else {\n      console.log(\"api Call\");\n      axios.get(`http://0.0.0.0:8080/products`).then(({headers, data}) => {\n        const pages_ = parseInt(headers['x-total-count']) / 20;\n        self.setState({pages:pages_});\n        localStorage.setItem('myKey:546726736522537625467', JSON.stringify(data))\n        self.props.dispatch({\n          type: 'SET',\n          data,\n        });\n      })\n    }\n    \n  }\n  componentDidUpdate(prev){\n    const { data }:any = this.props;\n    if (prev.data != data){\n      const urlParams = new URLSearchParams(window.location.search);\n      const myParam = urlParams.get('id');\n      console.log(myParam)\n      this.filterData(myParam);\n    }\n  }\n  filterData = (myParam) => {\n    const {data:d}: any = this.props;\n    const myData = d.filter(el => el.objectID == myParam);\n    console.log(myData)\n    if (myData.length > 0)\n      this.setState({ product: myData[0] })\n  }\n  render (){\n    const { product } = this.state;\n    console.log(product);\n    return (\n      <div style={{ padding: '30px' }}>\n        hi\n      </div>\n    );\n  };\n\n}\n\nexport default connect(s => s)(Product);"]},"metadata":{},"sourceType":"module"}